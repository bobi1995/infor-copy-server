# üöÄ Infor DataLake to MSSQL Sync Service

–¢–æ–≤–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª—É–∂–∏ –∑–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ –¥–∞–Ω–Ω–∏ –º–µ–∂–¥—É **Infor DataLake (Cloud)** –∏ –ª–æ–∫–∞–ª–Ω–∞ **MSSQL** –±–∞–∑–∞ –¥–∞–Ω–Ω–∏. –ü–æ–¥–¥—ä—Ä–∂–∞ –¥–≤–∞ —Ä–µ–∂–∏–º–∞ –Ω–∞ —Ä–∞–±–æ—Ç–∞:

- **Standard Tables:** –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–∞–Ω–æ –æ–±–Ω–æ–≤—è–≤–∞–Ω–µ (Upsert/Merge) –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª–Ω–∏ —Ç–∞–±–ª–∏—Ü–∏.
- **Preactor Tables:** –ü—ä–ª–Ω–æ –æ–ø—Ä–µ—Å–Ω—è–≤–∞–Ω–µ (Truncate & Insert) —á—Ä–µ–∑ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∏ SQL –∑–∞—è–≤–∫–∏.

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ–Ω —Å—Ç–µ–∫

- **Backend:** Node.js 18 (–Ω–∞ –±–∞–∑–∞ Debian Bullseye)
- **Frontend:** React + Vite + Tailwind CSS
- **Infrastructure:** Docker & Docker Compose
- **Database Connection:** Java Bridge (JDBC) –∑–∞ Infor Compass

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø—Ä–∏ –¥–µ–ø–ª–æ–π

–ù–∞ —Å—ä—Ä–≤—ä—Ä–∞ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–∏—Å—ä—Å—Ç–≤–∞—Ç —Å–ª–µ–¥–Ω–∏—Ç–µ –ø–∞–ø–∫–∏ –∏ —Ñ–∞–π–ª–æ–≤–µ:

```text
/infor-sync/
‚îú‚îÄ‚îÄ src/                # –ë–µ–∫–µ–Ω–¥ –ª–æ–≥–∏–∫–∞ (Node.js)
‚îú‚îÄ‚îÄ queries/            # SQL –∑–∞—è–≤–∫–∏ (fetch & insert)
‚îú‚îÄ‚îÄ ui/                 # –ë–∏–ª–¥–Ω–∞—Ç–∏ —Ñ–∞–π–ª–æ–≤–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (React dist)
‚îú‚îÄ‚îÄ lib/                # .jar –¥—Ä–∞–π–≤–µ—Ä–∏ –∑–∞ Infor
‚îú‚îÄ‚îÄ .env                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (IP, –ø–∞—Ä–æ–ª–∏, –ø–æ—Ä—Ç–æ–≤–µ)
‚îú‚îÄ‚îÄ Dockerfile          # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∑–∞ –±–∏–ª–¥ –Ω–∞ –±–µ–∫–µ–Ω–¥–∞
‚îî‚îÄ‚îÄ docker-compose.yml  # –î–µ—Ñ–∏–Ω–∏—Ü–∏—è –Ω–∞ —É—Å–ª—É–≥–∏—Ç–µ
```

---

## üìë –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∑–∞ –ø—Ä–µ—Ö–≤—ä—Ä–ª—è–Ω–µ (Deploy)

### 1. –õ–æ–∫–∞–ª–Ω–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (Development Machine)

–ü—Ä–µ–¥–∏ –≤—Å—è–∫–æ –∫–∞—á–≤–∞–Ω–µ –Ω–∞ –Ω–æ–≤–∞ –≤–µ—Ä—Å–∏—è:

1. –û—Ç–∏–¥–µ—Ç–µ –≤ –ø–∞–ø–∫–∞—Ç–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞.
2. –ò–∑–ø—ä–ª–Ω–µ—Ç–µ –∫–æ–º–∞–Ω–¥–∞—Ç–∞:
   ```bash
   npm run build
   ```
3. –ö–æ–ø–∏—Ä–∞–π—Ç–µ —Å—ä–¥—ä—Ä–∂–∞–Ω–∏–µ—Ç–æ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∞—Ç–∞ –ø–∞–ø–∫–∞ `dist/` –≤ –ø–∞–ø–∫–∞—Ç–∞ `ui/` –Ω–∞ –æ—Å–Ω–æ–≤–Ω–∏—è –ø—Ä–æ–µ–∫—Ç.

### 2. –¢—Ä–∞–Ω—Å—Ñ–µ—Ä –Ω–∞ –¥–∞–Ω–Ω–∏

–ü—Ä–µ—Ö–≤—ä—Ä–ª–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –∫—ä–º Linux —Å—ä—Ä–≤—ä—Ä–∞ (—á—Ä–µ–∑ FTP/SCP):

- **–ü–∞–ø–∫–∏:** `src/`, `queries/`, `ui/`, `lib/`
- **–§–∞–π–ª–æ–≤–µ:** `Dockerfile`, `docker-compose.yml`, `index.js`
- ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ù–µ –∫–∞—á–≤–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ `node_modules/`.

### 3. –†–∞–±–æ—Ç–∞ –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞ (Production)

–°–≤—ä—Ä–∂–µ—Ç–µ —Å–µ —á—Ä–µ–∑ SSH –∏ –∏–∑–ø—ä–ª–Ω–µ—Ç–µ —Å–ª–µ–¥–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥–∏ –≤ –ø–∞–ø–∫–∞—Ç–∞ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞:

#### –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–Ω–µ –∏ –ø—Ä–µ—Å—Ç—Ä–æ—è–≤–∞–Ω–µ:

```bash
# –°–ø–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–µ–∫—É—â–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
sudo docker compose down

# –ë–∏–ª–¥ –±–µ–∑ –∫–µ—à (–∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ –∑–∞ –ø—Ä–∏–ª–∞–≥–∞–Ω–µ –Ω–∞ BigDecimal –ø–∞—á–∞)
sudo docker compose up -d --build --no-cache
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω–∏—è –ø–∞—á:

```bash
sudo docker exec infor_copy_service cat node_modules/@naxmefy/jdbc/lib/Types.js | grep "NUMERIC"
```

#### –°–ª–µ–¥–µ–Ω–µ –Ω–∞ –ª–æ–≥–æ–≤–µ:

```bash
sudo docker compose logs -f app
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–∏ –±–µ–ª–µ–∂–∫–∏ –∏ –∫–æ—Ä–µ–∫—Ü–∏–∏

### üíé BigDecimal Fix (–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ–Ω)

–í `Dockerfile` –µ –≤–∫–ª—é—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `sed`, –∫–æ—è—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–∞—á–≤–∞ –ø–∞–∫–µ—Ç–∞ `@naxmefy/jdbc`. –¢–æ–≤–∞ –µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ, –∑–∞ –¥–∞ —Å–µ –∏–∑–±–µ–≥–Ω–∞—Ç `NULL` —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –≥–æ–ª–µ–º–∏ —á–∏—Å–ª–∞.

### üß© PlannedOrder Logic

–ü–æ–ª–µ—Ç–æ `PlannedOrder` –≤ —Ç–∞–±–ª–∏—Ü–∞ `LNProductionOrders` —Å–µ –ø—Ä–µ–æ–±—Ä–∞–∑—É–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤ `"0"` –æ—Ç Node.js, –∞–∫–æ Infor –≤—ä—Ä–Ω–µ `null`, –∑–∞ –¥–∞ —Å–µ –∏–∑–±–µ–≥–Ω–∞—Ç –≥—Ä–µ—à–∫–∏ –≤ MSSQL.

### üîë –ü—Ä–∞–≤–∞ –Ω–∞ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ (Frontend)

–ê–∫–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ä—Ç –Ω–µ —Å–µ –∑–∞—Ä–µ–∂–¥–∞ (–≥—Ä–µ—à–∫–∞ 403), –∏–∑–ø—ä–ª–Ω–µ—Ç–µ:

```bash
sudo chmod -R 755 ./ui
```

---

## üìû –ü–æ–¥–¥—Ä—ä–∂–∫–∞

–ü—Ä–∏ –≥—Ä–µ—à–∫–∏ –æ—Ç —Ç–∏–ø `ETIMEOUT`, –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ VPN –≤—Ä—ä–∑–∫–∞—Ç–∞ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏—Ç–µ –Ω–∞ Firewall –∫—ä–º MSSQL —Å—ä—Ä–≤—ä—Ä–∞.
